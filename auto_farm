if _G.SaveForObby == nil then
    _G.SaveForObby = false
end
if _G.OnlyCollectAndObby == nil then
    _G.OnlyCollectAndObby = false
end
if game.Players.LocalPlayer == nil then
    game.Players:GetPropertyChangedSignal("LocalPlayer"):Wait()
end
local Player = game.Players.LocalPlayer
local Debounce = false
local function FinishObby()
    repeat -- sometimes the game doesn't register doing the obby if you do it just once, which fucks you over if you're using SaveForObby
        if tostring(game.Workspace.ObbyParts.ObbyStartPart.BrickColor) == "Lime green" and Player.Character ~= nil and Player.Character:FindFirstChild("HumanoidRootPart") then
            wait()
            firetouchinterest(game:GetService("Workspace").ObbyParts.RealObbyStartPart, Player.Character.HumanoidRootPart,0)
            firetouchinterest(game:GetService("Workspace").ObbyParts.RealObbyStartPart, Player.Character.HumanoidRootPart,1)
            wait(0.1)
            firetouchinterest(game:GetService("Workspace").ObbyParts.VictoryPart, Player.Character.HumanoidRootPart,0)
            firetouchinterest(game:GetService("Workspace").ObbyParts.VictoryPart, Player.Character.HumanoidRootPart,1)
        end
        wait()
    until tostring(game.Workspace.ObbyParts.ObbyStartPart.BrickColor) ~= "Lime green"
end
game.Workspace.Tycoons.DescendantAdded:Connect(function(child) -- done like this since the tycoon is deleted and remade when you rebirth, so this is just easier.
    if child:FindFirstAncestor("Drops") and child:FindFirstAncestor(tostring(Player.Team)) then
        wait()
        game:GetService("ReplicatedStorage").CollectFruit:FireServer(child)
        wait()
        if not _G.SaveForObby and not _G.OnlyCollectAndObby then
            fireproximityprompt(game.Workspace.Tycoons[tostring(Player.Team)].Essentials.JuiceMaker.StartJuiceMakerButton.PromptAttachment.StartPrompt)
        end
    end
end)
game.Workspace.ObbyParts.ObbyStartPart:GetPropertyChangedSignal("BrickColor"):Connect(FinishObby)
FinishObby()
for i,v in pairs(getconnections(game:GetService("Players").LocalPlayer.Idled)) do
    v:Disable()
end
if _G.OnlyCollectAndObby then 
    return
end
if Player.Character == nil then
    Player.CharacterAdded:Wait()
end
Player.Character:WaitForChild("Humanoid",100).PlatformStand = true
local BP = Instance.new("BodyPosition",Player.Character:WaitForChild("HumanoidRootPart"))
BP.Position = BP.Parent.Position
BP.D = 7500
BP.P = 1000000
BP.MaxForce = Vector3.new(400000,400000,400000)
game:GetService('RunService').Stepped:connect(function()
    if Player.Character ~= nil then
        for i,v in pairs(Player.Character:GetChildren()) do
            if v:IsA("BasePart") then
                v.CanCollide = false
            end
        end
        if Player.Character:FindFirstChild("Humanoid") then
            Player.Character.Humanoid.PlatformStand = true
        end
    end
    if Debounce == false and game.Workspace.Tycoons:FindFirstChild(tostring(Player.Team)) and Player.Character ~= nil and Player.Character:FindFirstChild("HumanoidRootPart") then
        Debounce = true
        if not _G.SaveForObby and not _G.OnlyCollectAndObby then
            local TargetPosition = game.Workspace.Tycoons[tostring(Player.Team)].Essentials.JuiceMaker.StartJuiceMakerButton.CFrame * CFrame.new(0,-9,0)
            Player.Character.HumanoidRootPart.CFrame = TargetPosition
            BP.Position = TargetPosition.p
        end
        for i,v in pairs(game.Workspace.Tycoons[tostring(Player.Team)].Buttons:GetDescendants()) do
            firetouchinterest(v,Player.Character.HumanoidRootPart,0)
            firetouchinterest(v,Player.Character.HumanoidRootPart,1)
        end
        if game.Workspace.Tycoons[tostring(Player.Team)].Purchased:FindFirstChild("Golden Tree Statue") then
            local TargetPosition = game.Workspace.Tycoons[tostring(Player.Team)].Purchased["Golden Tree Statue"].StatueBottom.CFrame * CFrame.new(0,-9,0)
            Player.Character.HumanoidRootPart.CFrame = TargetPosition
            BP.Position = TargetPosition.p
            wait(0.2)
            fireproximityprompt(game.Workspace.Tycoons[tostring(Player.Team)].Purchased["Golden Tree Statue"].StatueBottom.PrestigePrompt)
            wait(2)
        end
        Debounce = false
    else
        for i,v in pairs(game.Workspace:GetDescendants()) do
            if v.Name == "Entrance" and Player.Character ~= nil and Player.Character:FindFirstChild("HumanoidRootPart") then
                firetouchinterest(v,Player.Character.HumanoidRootPart,0)
                firetouchinterest(v,Player.Character.HumanoidRootPart,1)
            end
        end
    end
end)

Player.CharacterAdded:Connect(function(Character)
    Character:WaitForChild("Humanoid",100).PlatformStand = true
    BP = Instance.new("BodyPosition",Character:WaitForChild("HumanoidRootPart"))
    BP.Position = BP.Parent.Position
    BP.D = 7500
    BP.P = 1000000
    BP.MaxForce = Vector3.new(400000,400000,400000)
end)
